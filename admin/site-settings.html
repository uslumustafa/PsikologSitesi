<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Ayarları - Psikolog Onur Uslu Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        .sidebar {
            background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #A855F7 100%);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }
        .nav-item {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }
        .nav-item.active {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: inset 4px 0 0 #FFFFFF;
        }
        .setting-card {
            transition: all 0.3s ease;
        }
        .setting-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .image-upload-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }
        .image-upload-area:hover {
            border-color: #6366f1;
            background-color: #f8fafc;
        }
        .image-upload-area.dragover {
            border-color: #6366f1;
            background-color: #eef2ff;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="sidebar w-64 text-white p-6">
            <div class="flex items-center mb-8">
                <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center mr-3">
                    <i class="fas fa-brain text-indigo-600 text-xl"></i>
                </div>
                <h1 class="text-xl font-bold">Admin Panel</h1>
            </div>
            
            <nav class="space-y-2">
                <a href="dashboard.html" class="nav-item flex items-center px-4 py-3 rounded-lg">
                    <i class="fas fa-tachometer-alt mr-3"></i>
                    Dashboard
                </a>
                <a href="blog-management.html" class="nav-item flex items-center px-4 py-3 rounded-lg">
                    <i class="fas fa-blog mr-3"></i>
                    Blog Yönetimi
                </a>
                <a href="appointments.html" class="nav-item flex items-center px-4 py-3 rounded-lg">
                    <i class="fas fa-calendar-alt mr-3"></i>
                    Randevular
                </a>
                <a href="site-settings.html" class="nav-item active flex items-center px-4 py-3 rounded-lg">
                    <i class="fas fa-cog mr-3"></i>
                    Site Ayarları
                </a>
                <a href="../index.html" class="nav-item flex items-center px-4 py-3 rounded-lg">
                    <i class="fas fa-external-link-alt mr-3"></i>
                    Siteyi Görüntüle
                </a>
                <button onclick="logout()" class="nav-item w-full text-left flex items-center px-4 py-3 rounded-lg hover:bg-red-500/20">
                    <i class="fas fa-sign-out-alt mr-3"></i>
                    Çıkış Yap
                </button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-y-auto">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-800">Site Ayarları</h2>
                    <div class="flex space-x-3">
                        <button onclick="saveAllSettings()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                            <i class="fas fa-save mr-2"></i>
                            Tüm Ayarları Kaydet
                        </button>
                        <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                            <i class="fas fa-sign-out-alt mr-2"></i>
                            Çıkış Yap
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <div class="p-6 space-y-8">
                <!-- Genel Bilgiler -->
                <div class="setting-card bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-info-circle text-indigo-600 mr-3"></i>
                        Genel Bilgiler
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Site Başlığı</label>
                            <input type="text" id="siteTitle" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Psikolog Onur Uslu | Gebze'de BDT Uzmanı">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Site Açıklaması</label>
                            <textarea id="siteDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">Gebze'de 2 yıllık deneyimli Psikolog Onur Uslu. 756 danışana hizmet verdi. Bilişsel Davranışçı Terapi, kaygı, depresyon, çift terapisi. Online ve yüz yüze seanslar.</textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Telefon</label>
                            <input type="text" id="phone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="+90 553 026 37 74">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">E-posta</label>
                            <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="psikologonuruslu@gmail.com">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Adres</label>
                            <input type="text" id="address" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Gebze, Kocaeli">
                        </div>
                    </div>
                </div>

                <!-- Profil Fotoğrafları -->
                <div class="setting-card bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-images text-indigo-600 mr-3"></i>
                        Profil Fotoğrafları
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ana Profil Fotoğrafı</label>
                            <div class="image-upload-area rounded-lg p-4 text-center" onclick="document.getElementById('mainPhotoInput').click()">
                                <img id="mainPhotoPreview" src="../images/psikolog-onur-uslu-professional.jpg" class="w-32 h-32 object-cover rounded-lg mx-auto mb-2">
                                <p class="text-gray-600 text-sm">Değiştirmek için tıklayın</p>
                                <input type="file" id="mainPhotoInput" accept="image/*" class="hidden" onchange="handleImageUpload(event, 'mainPhotoPreview')">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ofis Fotoğrafı</label>
                            <div class="image-upload-area rounded-lg p-4 text-center" onclick="document.getElementById('officePhotoInput').click()">
                                <img id="officePhotoPreview" src="../images/psikolog-onur-uslu-office.jpg" class="w-32 h-32 object-cover rounded-lg mx-auto mb-2">
                                <p class="text-gray-600 text-sm">Değiştirmek için tıklayın</p>
                                <input type="file" id="officePhotoInput" accept="image/*" class="hidden" onchange="handleImageUpload(event, 'officePhotoPreview')">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hakkımda Bölümü -->
                <div class="setting-card bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-user text-indigo-600 mr-3"></i>
                        Hakkımda Bölümü
                    </h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Başlık</label>
                            <input type="text" id="aboutTitle" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Psikolog Onur Uslu">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Açıklama</label>
                            <textarea id="aboutDescription" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">Selçuk Üniversitesi Psikoloji lisans bölümünden onur derecesi ile mezun oldum. 2 yıllık deneyimim boyunca 756 danışanıma hizmet verdim. Psikoloji alanındaki bilgi birikimimi Prof. Dr. Mehmet Hakan Türkçapar ve ekibinden aldığım Bilişsel Davranışçı Terapi eğitimi ile pekiştirdim. Aynı zamanda bilinçli farkındalık temelli terapi ve oyun terapisi eğitimleri almış biri olarak bu alanlarda yetkinliğim bulunmaktadır.</textarea>
                        </div>
                    </div>
                </div>

                <!-- Hizmetler -->
                <div class="setting-card bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-concierge-bell text-indigo-600 mr-3"></i>
                        Hizmetler
                    </h3>
                    
                    <div class="space-y-4" id="servicesList">
                        <div class="flex items-center space-x-4">
                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Bilişsel Davranışçı Terapi (BDT)">
                            <button onclick="removeService(this)" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="flex items-center space-x-4">
                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Kaygı ve Anksiyete Terapisi">
                            <button onclick="removeService(this)" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="flex items-center space-x-4">
                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Depresyon Terapisi">
                            <button onclick="removeService(this)" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="flex items-center space-x-4">
                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="Çift ve İlişki Terapisi">
                            <button onclick="removeService(this)" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button onclick="addService()" class="mt-4 text-indigo-600 hover:text-indigo-800 flex items-center">
                        <i class="fas fa-plus mr-2"></i>
                        Yeni Hizmet Ekle
                    </button>
                </div>

                <!-- İstatistikler -->
                <div class="setting-card bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-chart-bar text-indigo-600 mr-3"></i>
                        İstatistikler
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Deneyim Yılı</label>
                            <input type="number" id="experienceYears" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Toplam Danışan</label>
                            <input type="number" id="totalClients" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="756">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Başarı Oranı (%)</label>
                            <input type="number" id="successRate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" value="95">
                        </div>
                    </div>
                </div>

                <!-- Sosyal Medya -->
                <div class="setting-card bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-share-alt text-indigo-600 mr-3"></i>
                        Sosyal Medya Linkleri
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Instagram</label>
                            <input type="url" id="instagramUrl" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="https://instagram.com/username">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn</label>
                            <input type="url" id="linkedinUrl" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="https://linkedin.com/in/username">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Twitter</label>
                            <input type="url" id="twitterUrl" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="https://twitter.com/username">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">YouTube</label>
                            <input type="url" id="youtubeUrl" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="https://youtube.com/channel/username">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function handleImageUpload(event, previewId) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById(previewId).src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        function addService() {
            try {
                const servicesList = document.getElementById('servicesList');
                if (!servicesList) {
                    console.error('servicesList elementi bulunamadı');
                    return;
                }
                
                const newService = document.createElement('div');
                newService.className = 'flex items-center space-x-4';
                newService.innerHTML = `
                    <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Yeni hizmet adı">
                    <button onclick="removeService(this)" class="text-red-600 hover:text-red-800">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                servicesList.appendChild(newService);
                console.log('Yeni hizmet eklendi');
            } catch (error) {
                console.error('Hizmet eklenirken hata:', error);
            }
        }

        function removeService(button) {
            try {
                if (button && button.parentElement) {
                    button.parentElement.remove();
                    console.log('Hizmet silindi');
                }
            } catch (error) {
                console.error('Hizmet silinirken hata:', error);
            }
        }

        function saveAllSettings() {
            try {
                console.log('Ayarlar kaydediliyor...');
                
                const settings = {
                    siteTitle: document.getElementById('siteTitle')?.value || '',
                    siteDescription: document.getElementById('siteDescription')?.value || '',
                    phone: document.getElementById('phone')?.value || '',
                    email: document.getElementById('email')?.value || '',
                    address: document.getElementById('address')?.value || '',
                    aboutTitle: document.getElementById('aboutTitle')?.value || '',
                    aboutDescription: document.getElementById('aboutDescription')?.value || '',
                    experienceYears: document.getElementById('experienceYears')?.value || '',
                    totalClients: document.getElementById('totalClients')?.value || '',
                    successRate: document.getElementById('successRate')?.value || '',
                    instagramUrl: document.getElementById('instagramUrl')?.value || '',
                    linkedinUrl: document.getElementById('linkedinUrl')?.value || '',
                    twitterUrl: document.getElementById('twitterUrl')?.value || '',
                    youtubeUrl: document.getElementById('youtubeUrl')?.value || '',
                    services: Array.from(document.querySelectorAll('#servicesList input')).map(input => input.value).filter(value => value.trim() !== ''),
                    mainPhoto: 'psikolog-onur-uslu-professional.jpg',
                    officePhoto: 'psikolog-onur-uslu-office.jpg'
                };

                console.log('Saving settings:', settings);
                
                // Ayarları localStorage'a kaydet
                localStorage.setItem('adminSettings', JSON.stringify(settings));
                
                // Ana web sitesine değişiklik bildirimi gönder
                window.dispatchEvent(new CustomEvent('adminSettingsUpdated', { detail: settings }));
                
                alert('Ayarlar başarıyla kaydedildi! Ana web sitesi otomatik olarak güncellenecek.');
                console.log('Ayarlar başarıyla kaydedildi');
            } catch (error) {
                console.error('Ayarlar kaydedilirken hata:', error);
                alert('Ayarlar kaydedilirken hata oluştu: ' + error.message);
            }
        }

        // Giriş kontrolü
        function checkAuth() {
            const token = localStorage.getItem('adminToken');
            console.log('Token kontrol ediliyor:', token);
            
            if (!token) {
                console.log('Token bulunamadı, login sayfasına yönlendiriliyor...');
                // Geçici olarak giriş kontrolünü devre dışı bırak
                // window.location.href = 'login.html';
                // return false;
            }
            return true;
        }

        // Çıkış yapma
        function logout() {
            if (confirm('Psikolog Onur Uslu sayfasından çıkmak istediğinize emin misiniz?')) {
                localStorage.removeItem('adminToken');
                localStorage.removeItem('adminUser');
                localStorage.removeItem('adminSettings');
                window.location.href = 'login.html';
            }
        }

        // Düzenleme seçeneklerini aktif et
        function enableEditOptions() {
            console.log('Site ayarları düzenleme seçenekleri aktif ediliyor...');
            
            // Tüm düzenleme butonlarını aktif et
            const editButtons = document.querySelectorAll('[onclick*="add"], [onclick*="remove"], [onclick*="save"]');
            editButtons.forEach(button => {
                button.disabled = false;
                button.classList.remove('opacity-50', 'cursor-not-allowed');
                button.classList.add('cursor-pointer', 'hover:opacity-80');
            });
            
            // Form alanlarını aktif et
            const formInputs = document.querySelectorAll('input, textarea, select');
            formInputs.forEach(input => {
                input.disabled = false;
                input.classList.remove('opacity-50', 'cursor-not-allowed');
            });
            
            console.log('Site ayarları düzenleme seçenekleri aktif edildi!');
        }

        // Load settings on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Site ayarları sayfası yüklendi');
            
            try {
                if (checkAuth()) {
                    console.log('Giriş kontrolü başarılı');
                    enableEditOptions();
                    // Here you would load settings from API
                    console.log('Loading site settings...');
                } else {
                    console.log('Giriş kontrolü başarısız');
                }
            } catch (error) {
                console.error('Sayfa yüklenirken hata:', error);
            }
        });
    </script>
</body>
</html>
